module.exports=[56855,a=>{"use strict";a.s(["default",()=>P],56855);var b=a.i(11755),c=a.i(92782),d=a.i(78352),e=a.i(68968),f=a.i(99570),g=a.i(58539),h=a.i(89499),i=a.i(56259),j=a.i(35732),k=a.i(25284),l=a.i(8304),m=a.i(92069),n=a.i(27132),o=a.i(25283),p=a.i(92276),q=a.i(24852),r=a.i(1468),s=a.i(87508),t=a.i(11700),u=a.i(66718),v=a.i(70430),w=a.i(14574),x=a.i(91119),y=a.i(42261),z=a.i(68114);let A=(0,y.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function B({className:a,variant:c,...d}){return(0,b.jsx)("div",{className:(0,z.cn)(A({variant:c}),a),...d})}var C=a.i(54935),D=a.i(31902),D=D,E=a.i(63358),F=a.i(54802),G=a.i(95811);let H=t.z.object({title:t.z.string().min(3,"Title must be at least 3 characters"),content:t.z.string().min(1,"Content is required"),thumbnail:t.z.string().url("Must be a valid URL").optional().or(t.z.literal("")),tags:t.z.array(t.z.string().min(1,"Tag cannot be empty")),isFeatured:t.z.boolean(),isPublished:t.z.boolean()});function I({blog:a,isOpen:d,onClose:e,onSuccess:g}){let[j,k]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),{register:q,handleSubmit:t,setValue:y,watch:z,formState:{errors:A},reset:I}=(0,r.useForm)({resolver:(0,s.zodResolver)(H),defaultValues:{title:a.title,content:a.content,thumbnail:a.thumbnail||"",tags:a.tags||[],isFeatured:a.isFeatured||!1,isPublished:a.isPublished||!1}}),J=z("tags")||[],K=z();(0,c.useEffect)(()=>{d&&a&&I({title:a.title,content:a.content,thumbnail:a.thumbnail||"",tags:a.tags||[],isFeatured:a.isFeatured||!1,isPublished:a.isPublished||!1})},[d,a,I]),(0,c.useEffect)(()=>{d&&a&&(console.log("EditBlogModal: Setting content:",a.content),y("content",a.content),setTimeout(()=>{console.log("EditBlogModal: Setting content again:",a.content),y("content",a.content)},200))},[d,a,y]);let L=()=>{m.trim()&&!J.includes(m.trim())&&(y("tags",[...J,m.trim()]),n(""))},M=async b=>{k(!0);try{let c={...b,thumbnail:b.thumbnail||void 0,tags:b.tags.filter(a=>""!==a.trim())};await (0,F.updateBlog)(a._id,c),G.toast.success("Blog updated successfully!"),g()}catch(a){console.error("Error updating blog:",a),G.toast.error(a instanceof Error?a.message:"Failed to update blog")}finally{k(!1)}};return(0,b.jsx)(w.Dialog,{open:d,onOpenChange:e,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(w.DialogHeader,{children:[(0,b.jsx)(w.DialogTitle,{children:"Edit Blog"}),(0,b.jsx)(w.DialogDescription,{children:"Update your blog post details and content."})]}),(0,b.jsxs)("form",{onSubmit:t(M),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"title",children:"Title *"}),(0,b.jsx)(u.Input,{id:"title",...q("title"),placeholder:"Enter blog title"}),A.title&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:A.title.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"thumbnail",children:"Thumbnail URL"}),(0,b.jsx)(u.Input,{id:"thumbnail",...q("thumbnail"),placeholder:"https://example.com/image.jpg"}),A.thumbnail&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:A.thumbnail.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{children:"Tags"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(u.Input,{value:m,onChange:a=>n(a.target.value),placeholder:"Add a tag",onKeyPress:a=>{"Enter"===a.key&&(a.preventDefault(),L())}}),(0,b.jsx)(f.Button,{type:"button",onClick:L,size:"sm",children:(0,b.jsx)(h.Plus,{className:"w-4 h-4"})})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:J.map(a=>(0,b.jsxs)(B,{variant:"secondary",className:"flex items-center gap-1",children:[a,(0,b.jsx)(C.X,{className:"w-3 h-3 cursor-pointer hover:text-red-500",onClick:()=>{y("tags",J.filter(b=>b!==a))}})]},a))})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"isFeatured",...q("isFeatured"),className:"rounded"}),(0,b.jsx)(v.Label,{htmlFor:"isFeatured",children:"Featured"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"isPublished",...q("isPublished"),className:"rounded"}),(0,b.jsx)(v.Label,{htmlFor:"isPublished",children:"Published"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(v.Label,{children:"Preview"}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>p(!o),children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.default,{className:"w-4 h-4 mr-2"}),"Hide Preview"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Eye,{className:"w-4 h-4 mr-2"}),"Show Preview"]})})]}),o&&(0,b.jsx)(x.Card,{className:"border-2 border-dashed",children:(0,b.jsx)(x.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold line-clamp-2",children:K.title||"Blog Title"}),K.thumbnail&&(0,b.jsx)("div",{className:"relative h-32 w-full rounded-lg overflow-hidden",children:(0,b.jsx)(i.default,{src:K.thumbnail,alt:"Thumbnail preview",width:400,height:128,className:"w-full h-full object-cover"})}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,b.jsx)("div",{className:"prose prose-sm max-w-none [&_h1]:text-lg [&_h1]:font-bold [&_h1]:mb-2 [&_h2]:text-base [&_h2]:font-bold [&_h2]:mb-2 [&_h3]:text-sm [&_h3]:font-bold [&_h3]:mb-1 [&_img]:max-w-full [&_img]:h-auto [&_img]:rounded",dangerouslySetInnerHTML:{__html:K.content||"<p>Blog content will appear here...</p>"}})}),J.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:J.map(a=>(0,b.jsx)(B,{variant:"outline",className:"text-xs",children:a},a))})]})})})]})]}),(0,b.jsx)(x.Card,{children:(0,b.jsxs)(x.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"content",children:"Content *"}),(0,b.jsx)(E.default,{value:K.content||"",onChange:a=>y("content",a),placeholder:"Write your blog content here..."},a._id),A.content&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:A.content.message})]}),(0,b.jsxs)("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[(0,b.jsx)("h4",{className:"font-medium text-sm mb-2",children:"Editor Features:"}),(0,b.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,b.jsxs)("li",{children:["• ",(0,b.jsx)("strong",{children:"Bold"}),", ",(0,b.jsx)("em",{children:"italic"}),", and"," ",(0,b.jsx)("u",{children:"underline"})," text formatting"]}),(0,b.jsx)("li",{children:"• Headings (H1, H2, H3) for structure"}),(0,b.jsx)("li",{children:"• Bullet and numbered lists"}),(0,b.jsx)("li",{children:"• Insert links and images by URL"}),(0,b.jsx)("li",{children:"• Text alignment (left, center, right)"}),(0,b.jsx)("li",{children:"• Blockquotes and code blocks"}),(0,b.jsx)("li",{children:"• Clear formatting option"})]})]})]})}),(0,b.jsxs)(w.DialogFooter,{children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",disabled:j,children:j?"Updating...":"Update Blog"})]})]})]})})}var J=a.i(25476);function K({blog:a,isOpen:d,onClose:e,onSuccess:g}){let[h,i]=(0,c.useState)(!1),j=async()=>{i(!0);try{await (0,F.deleteBlog)(a._id),G.toast.success("Blog deleted successfully!"),g()}catch(a){console.error("Error deleting blog:",a),G.toast.error(a instanceof Error?a.message:"Failed to delete blog")}finally{i(!1)}};return(0,b.jsx)(w.Dialog,{open:d,onOpenChange:e,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(w.DialogHeader,{children:[(0,b.jsxs)(w.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(J.AlertTriangle,{className:"w-5 h-5 text-red-500"}),"Delete Blog"]}),(0,b.jsx)(w.DialogDescription,{children:"Are you sure you want to delete this blog? This action cannot be undone."})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,b.jsx)("h4",{className:"font-medium text-sm mb-1",children:"Blog to be deleted:"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.title})]})}),(0,b.jsxs)(w.DialogFooter,{children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),(0,b.jsxs)(f.Button,{type:"button",variant:"destructive",onClick:j,disabled:h,className:"flex items-center gap-2",children:[(0,b.jsx)(o.Trash2,{className:"w-4 h-4"}),h?"Deleting...":"Delete Blog"]})]})]})})}var L=a.i(84432);function M({blog:a,onBlogUpdate:g}){let[h,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),u=L.default.sanitize(a.content,{ALLOWED_TAGS:[]}).substring(0,100);return(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group rounded-2xl border bg-card shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col h-full",children:[(0,b.jsx)(d.default,{href:`/blogs/${a.slug}`,className:"relative block w-full",children:(0,b.jsxs)("div",{className:"relative h-52 w-full overflow-hidden",children:[(0,b.jsx)(i.default,{src:a.thumbnail,alt:a.title,fill:!0,className:"object-cover transition-transform duration-500 group-hover:scale-105",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",priority:!1}),(0,b.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-background/80 via-background/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,b.jsxs)("div",{className:"absolute left-4 top-4 flex flex-wrap gap-2",children:[a.isFeatured&&(0,b.jsx)("span",{className:"inline-flex items-center rounded-full bg-yellow-500/90 text-yellow-900 px-2.5 py-0.5 text-[10px] font-semibold shadow-sm",children:"Featured"}),!a.isPublished&&(0,b.jsx)("span",{className:"inline-flex items-center rounded-full bg-orange-500/90 text-orange-900 px-2.5 py-0.5 text-[10px] font-semibold shadow-sm",children:"Draft"})]}),(0,b.jsx)("div",{className:"absolute right-4 top-4 flex flex-wrap gap-2",children:a.tags.slice(0,2).map(a=>(0,b.jsx)("span",{className:"inline-flex items-center rounded-full bg-primary/90 text-primary-foreground px-2.5 py-0.5 text-[10px] font-semibold shadow-sm",children:a},a))})]})}),(0,b.jsxs)("div",{className:"flex flex-col flex-1 p-5",children:[(0,b.jsx)(d.default,{href:`/blogs/${a.slug}`,children:(0,b.jsx)("h3",{className:"text-lg md:text-xl font-semibold tracking-tight text-foreground group-hover:text-primary transition-colors line-clamp-2 min-h-[3.5rem]",children:a.title})}),(0,b.jsxs)("p",{className:"mt-2 text-sm text-muted-foreground line-clamp-2 min-h-[2.5rem]",children:[u,"..."]}),(0,b.jsxs)("div",{className:"mt-auto",children:[(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"inline-flex h-6 items-center rounded-full bg-muted px-2 font-medium text-foreground",children:[(0,b.jsx)(q.User,{className:"w-3 h-3 mr-1"}),a.author.name]})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(k.Calendar,{className:"h-4 w-4"}),new Date(a.createdAt).toLocaleDateString()]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(l.Eye,{className:"h-4 w-4"})," ",a.views]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,b.jsxs)(d.default,{href:`/blogs/${a.slug}`,className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 font-medium text-sm transition-colors duration-200",children:["View Details",(0,b.jsx)(p.ExternalLink,{className:"w-4 h-4"})]}),(0,b.jsxs)(j.DropdownMenu,{children:[(0,b.jsx)(j.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(m.MoreVertical,{className:"w-4 h-4"})})}),(0,b.jsxs)(j.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(j.DropdownMenuItem,{onClick:()=>r(!0),children:[(0,b.jsx)(n.Edit,{className:"w-4 h-4 mr-2"}),"Edit Blog"]}),(0,b.jsxs)(j.DropdownMenuItem,{onClick:()=>t(!0),className:"text-red-600 focus:text-red-600",children:[(0,b.jsx)(o.Trash2,{className:"w-4 h-4 mr-2"}),"Delete Blog"]})]})]})]})]})]}),(0,b.jsx)(I,{blog:a,isOpen:h,onClose:()=>r(!1),onSuccess:()=>{g?.(),r(!1)}}),(0,b.jsx)(K,{blog:a,isOpen:s,onClose:()=>t(!1),onSuccess:()=>{g?.(),t(!1)}})]})}a.i(99471);var N=a.i(11642),O=a.i(56267);function P(){let a=(0,O.useRouter)(),{user:i,isLoading:j}=(0,N.useAuth)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),q=async()=>{try{let a=await (0,F.getAllBlogsForManagement)();l(a)}catch(a){console.error("Error fetching blogs:",a)}finally{n(!1)}},r=async()=>{p(!0),await q(),p(!1)};(0,c.useEffect)(()=>{q()},[]);let s=()=>{q()};return j?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):i?m?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(g.RefreshCw,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading blogs..."})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-background",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Manage Blogs"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Create, edit, and manage your blog posts"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)(f.Button,{variant:"outline",onClick:r,disabled:o,children:[(0,b.jsx)(g.RefreshCw,{className:`w-4 h-4 mr-2 ${o?"animate-spin":""}`}),"Refresh"]}),(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsxs)(d.default,{href:"/dashboard/blogs/add-blog",children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4 mr-2"}),"New Blog"]})})]})]}),0===k.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-muted rounded-full flex items-center justify-center",children:(0,b.jsx)(h.Plus,{className:"w-12 h-12 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No blogs yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Get started by creating your first blog post"}),(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsxs)(d.default,{href:"/dashboard/blogs/add-blog",children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4 mr-2"}),"Create Blog"]})})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map((a,c)=>(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*c},children:(0,b.jsx)(M,{blog:a,onBlogUpdate:s})},a._id))}),k.length>0&&(0,b.jsxs)("div",{className:"mt-12 grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"bg-card rounded-lg p-6 border",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)(h.Plus,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:k.length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Blogs"})]})]})}),(0,b.jsx)("div",{className:"bg-card rounded-lg p-6 border",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)(h.Plus,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:k.filter(a=>a.isPublished).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Published"})]})]})}),(0,b.jsx)("div",{className:"bg-card rounded-lg p-6 border",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)(h.Plus,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:k.filter(a=>a.isFeatured).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Featured"})]})]})})]})]})}):(a.push("/login"),null)}}];

//# sourceMappingURL=src_app_%28dashboard%29_dashboard_blogs_page_tsx_884d13b1._.js.map