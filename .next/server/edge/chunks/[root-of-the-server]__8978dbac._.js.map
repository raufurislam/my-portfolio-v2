{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { jwtDecode } from \"jwt-decode\";\r\nimport { cookies } from \"next/headers\";\r\nimport type { NextRequest } from \"next/server\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\ntype Role = keyof typeof roleBasedPrivateRoutes;\r\n\r\nconst AuthRoutes = [\"/auth/login\", \"/auth/register\"];\r\n\r\nconst roleBasedPrivateRoutes = {\r\n  SUPER_ADMIN: [/^\\/dashboard/],\r\n  // ADMIN: [/^\\/dashboard/],\r\n  // USER: [/^\\/dashboard/],\r\n};\r\n\r\nexport async function middleware(request: NextRequest) {\r\n  const { pathname } = request.nextUrl;\r\n\r\n  const accessToken = (await cookies()).get(\"accessToken\")?.value;\r\n\r\n  if (!accessToken) {\r\n    if (AuthRoutes.includes(pathname)) {\r\n      return NextResponse.next();\r\n    } else {\r\n      return NextResponse.redirect(new URL(\"/auth/login\", request.url));\r\n    }\r\n  }\r\n  let decodedData = null;\r\n  decodedData = jwtDecode(accessToken) as any;\r\n  const role = decodedData?.role;\r\n  if (role && roleBasedPrivateRoutes[role as Role]) {\r\n    const routes = roleBasedPrivateRoutes[role as Role];\r\n    if (routes.some((route) => pathname.match(route))) {\r\n      return NextResponse.next();\r\n    }\r\n  }\r\n  return NextResponse.redirect(new URL(\"/\", request.url));\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\"/auth/login\", \"/auth/register\", \"/dashboard/:page*\"],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AAEA;AAAA;;;;AAIA,MAAM,aAAa;IAAC;IAAe;CAAiB;AAEpD,MAAM,yBAAyB;IAC7B,aAAa;QAAC;KAAe;AAG/B;AAEO,eAAe,WAAW,OAAoB;IACnD,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,MAAM,cAAc,CAAC,MAAM,IAAA,qTAAO,GAAE,EAAE,GAAG,CAAC,gBAAgB;IAE1D,IAAI,CAAC,aAAa;QAChB,IAAI,WAAW,QAAQ,CAAC,WAAW;YACjC,OAAO,+TAAY,CAAC,IAAI;QAC1B,OAAO;YACL,OAAO,+TAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,eAAe,QAAQ,GAAG;QACjE;IACF;IACA,IAAI,cAAc;IAClB,cAAc,IAAA,qOAAS,EAAC;IACxB,MAAM,OAAO,aAAa;IAC1B,IAAI,QAAQ,sBAAsB,CAAC,KAAa,EAAE;QAChD,MAAM,SAAS,sBAAsB,CAAC,KAAa;QACnD,IAAI,OAAO,IAAI,CAAC,CAAC,QAAU,SAAS,KAAK,CAAC,SAAS;YACjD,OAAO,+TAAY,CAAC,IAAI;QAC1B;IACF;IACA,OAAO,+TAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;AACvD;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAe;QAAkB;KAAoB;AACjE"}}]
}